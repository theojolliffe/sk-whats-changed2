import{S as G,i as H,s as R,$ as w,a0 as v,a as S,d as y,b as r,g as b,t as B,h as J,f as m,I as P,j as K,R as N,T as C,F as M,W as A,aE as O,aF as Q,aG as U}from"../../../chunks/vendor-64f33e0e.js";function F(t,e,i){const s=t.slice();return s[18]=e[i],s[20]=i,s}function j(t,e,i){const s=t.slice();return s[18]=e[i],s}function q(t){let e,i,s,u;return{c(){e=w("path"),this.h()},l(a){e=v(a,"path",{d:!0,fill:!0,stroke:!0,"stroke-opacity":!0,"stroke-width":!0}),S(e).forEach(y),this.h()},h(){r(e,"d",i=t[5](t[18])),r(e,"fill","none"),r(e,"stroke",s=t[0](t[18])),r(e,"stroke-opacity","0.5"),r(e,"stroke-width",u=t[18].width)},m(a,f){b(a,e,f)},p(a,f){f&96&&i!==(i=a[5](a[18]))&&r(e,"d",i),f&65&&s!==(s=a[0](a[18]))&&r(e,"stroke",s),f&64&&u!==(u=a[18].width)&&r(e,"stroke-width",u)},d(a){a&&y(e)}}}function D(t){let e,i,s,u,a,f,n,o=t[18].id+"",g,l,c,k;return{c(){e=w("rect"),n=w("text"),g=B(o),this.h()},l(h){e=v(h,"rect",{x:!0,y:!0,height:!0,width:!0,fill:!0}),S(e).forEach(y),n=v(h,"text",{x:!0,y:!0,dy:!0,style:!0,class:!0});var d=S(n);g=J(d,o),d.forEach(y),this.h()},h(){r(e,"x",i=t[18].x0),r(e,"y",s=t[18].y0),r(e,"height",u=t[18].y1-t[18].y0),r(e,"width",a=t[18].x1-t[18].x0),r(e,"fill",f=t[1](t[18])),r(n,"x",l=t[18].x0<t[3]/4?t[18].x1+6:t[18].x0-6),r(n,"y",c=(t[18].y1+t[18].y0)/2),r(n,"dy",k=t[4]/2-2),m(n,"fill",t[2](t[18])),m(n,"font-size",t[4]+"px"),m(n,"text-anchor",t[18].x0<t[3]/4?"start":"end"),r(n,"class","svelte-1k7ox4e")},m(h,d){b(h,e,d),b(h,n,d),P(n,g)},p(h,d){d&64&&i!==(i=h[18].x0)&&r(e,"x",i),d&64&&s!==(s=h[18].y0)&&r(e,"y",s),d&64&&u!==(u=h[18].y1-h[18].y0)&&r(e,"height",u),d&64&&a!==(a=h[18].x1-h[18].x0)&&r(e,"width",a),d&66&&f!==(f=h[1](h[18]))&&r(e,"fill",f),d&64&&o!==(o=h[18].id+"")&&K(g,o),d&72&&l!==(l=h[18].x0<h[3]/4?h[18].x1+6:h[18].x0-6)&&r(n,"x",l),d&64&&c!==(c=(h[18].y1+h[18].y0)/2)&&r(n,"y",c),d&16&&k!==(k=h[4]/2-2)&&r(n,"dy",k),d&68&&m(n,"fill",h[2](h[18])),d&16&&m(n,"font-size",h[4]+"px"),d&72&&m(n,"text-anchor",h[18].x0<h[3]/4?"start":"end")},d(h){h&&y(e),h&&y(n)}}}function V(t){let e,i,s,u=t[6].links,a=[];for(let o=0;o<u.length;o+=1)a[o]=q(j(t,u,o));let f=t[6].nodes,n=[];for(let o=0;o<f.length;o+=1)n[o]=D(F(t,f,o));return{c(){e=w("g"),i=w("g");for(let o=0;o<a.length;o+=1)a[o].c();s=w("g");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=v(o,"g",{class:!0});var g=S(e);i=v(g,"g",{class:!0});var l=S(i);for(let k=0;k<a.length;k+=1)a[k].l(l);l.forEach(y),s=v(g,"g",{class:!0});var c=S(s);for(let k=0;k<n.length;k+=1)n[k].l(c);c.forEach(y),g.forEach(y),this.h()},h(){r(i,"class","link-group"),r(s,"class","rect-group"),r(e,"class","sankey-layer")},m(o,g){b(o,e,g),P(e,i);for(let l=0;l<a.length;l+=1)a[l].m(i,null);P(e,s);for(let l=0;l<n.length;l+=1)n[l].m(s,null)},p(o,[g]){if(g&97){u=o[6].links;let l;for(l=0;l<u.length;l+=1){const c=j(o,u,l);a[l]?a[l].p(c,g):(a[l]=q(c),a[l].c(),a[l].m(i,null))}for(;l<a.length;l+=1)a[l].d(1);a.length=u.length}if(g&94){f=o[6].nodes;let l;for(l=0;l<f.length;l+=1){const c=F(o,f,l);n[l]?n[l].p(c,g):(n[l]=D(c),n[l].c(),n[l].m(s,null))}for(;l<n.length;l+=1)n[l].d(1);n.length=f.length}},i:N,o:N,d(o){o&&y(e),C(a,o),C(n,o)}}}function X(t,e,i){let s,u,a,f,n,o,g;const{data:l,width:c,height:k}=M("LayerCake");A(t,l,_=>i(16,o=_)),A(t,c,_=>i(3,n=_)),A(t,k,_=>i(17,g=_));let{colorLinks:h=_=>"rgba(0, 0, 0, .2)"}=e,{colorNodes:d=_=>"#333"}=e,{colorText:T=_=>"#263238"}=e,{nodeWidth:E=5}=e,{nodePadding:I=10}=e,{linkSort:L=null}=e,{nodeId:W=_=>_.id}=e,{nodeAlign:z=U}=e;return t.$$set=_=>{"colorLinks"in _&&i(0,h=_.colorLinks),"colorNodes"in _&&i(1,d=_.colorNodes),"colorText"in _&&i(2,T=_.colorText),"nodeWidth"in _&&i(10,E=_.nodeWidth),"nodePadding"in _&&i(11,I=_.nodePadding),"linkSort"in _&&i(12,L=_.linkSort),"nodeId"in _&&i(13,W=_.nodeId),"nodeAlign"in _&&i(14,z=_.nodeAlign)},t.$$.update=()=>{t.$$.dirty&162824&&i(15,s=O().nodeAlign(z).nodeWidth(E).nodePadding(I).nodeId(W).size([n,g]).linkSort(L)),t.$$.dirty&98304&&i(6,u=s(o)),t.$$.dirty&8&&i(4,f=n<=320?8:12)},i(5,a=Q()),[h,d,T,n,f,a,u,l,c,k,E,I,L,W,z,s,o,g]}class Z extends G{constructor(e){super();H(this,e,X,V,R,{colorLinks:0,colorNodes:1,colorText:2,nodeWidth:10,nodePadding:11,linkSort:12,nodeId:13,nodeAlign:14})}}export{Z as default};
