import{S as Y,i as Z,s as x,e as K,k as T,t as M,c as p,a as S,d as v,m as B,h as N,b as _,f as h,g as q,I as m,j as O,R as A,T as $,F as ee,W as j,aj as te,ap as le,aq as ae,ar as ie}from"../../../chunks/vendor-64f33e0e.js";function G(e,l,t){const n=e.slice();return n[27]=l[t],n}function H(e){let l,t=e[13](e[27].data.data[e[1]])+"",n;return{c(){l=K("div"),n=M(t),this.h()},l(a){l=p(a,"DIV",{class:!0});var d=S(l);n=N(d,t),d.forEach(v),this.h()},h(){_(l,"class","text value svelte-1d3oco8")},m(a,d){q(a,l,d),m(l,n)},p(a,d){d&258&&t!==(t=a[13](a[27].data.data[a[1]])+"")&&O(n,t)},d(a){a&&v(l)}}}function J(e){let l,t,n,a,d,u=e[12](e[27].data.id)+"",s,c,C,k,g,f=e[27].data.data[e[1]]&&H(e);return{c(){l=K("div"),t=K("div"),n=T(),a=K("div"),d=K("div"),s=M(u),c=T(),f&&f.c(),C=T(),this.h()},l(i){l=p(i,"DIV",{class:!0,"data-id":!0,"data-visible":!0});var o=S(l);t=p(o,"DIV",{class:!0,style:!0}),S(t).forEach(v),n=B(o),a=p(o,"DIV",{class:!0,style:!0});var b=S(a);d=p(b,"DIV",{class:!0});var y=S(d);s=N(y,u),y.forEach(v),c=B(b),f&&f.l(b),b.forEach(v),C=B(o),o.forEach(v),this.h()},h(){_(t,"class","circle svelte-1d3oco8"),h(t,"left",e[27].x+"px"),h(t,"top",e[27].y+"px"),h(t,"width",e[27].r*2+"px"),h(t,"height",e[27].r*2+"px"),h(t,"background-color",e[3]),h(t,"border","1px solid "+e[4]),_(d,"class","text svelte-1d3oco8"),_(a,"class","text-group svelte-1d3oco8"),h(a,"color",e[5]),h(a,"text-shadow","-"+e[6]+"px -"+e[6]+"px 0 "+e[7]+", "+e[6]+"px -"+e[6]+"px 0 "+e[7]+", -"+e[6]+"px "+e[6]+"px 0 "+e[7]+", "+e[6]+"px "+e[6]+"px 0 "+e[7]),h(a,"left",e[27].x+"px"),h(a,"top",e[27].y-(e[2](e[27].r)?0:e[27].r+4)+"px"),_(l,"class","circle-group svelte-1d3oco8"),_(l,"data-id",k=e[27].data.id),_(l,"data-visible",g=e[2](e[27].r))},m(i,o){q(i,l,o),m(l,t),m(l,n),m(l,a),m(a,d),m(d,s),m(a,c),f&&f.m(a,null),m(l,C)},p(i,o){o&256&&h(t,"left",i[27].x+"px"),o&256&&h(t,"top",i[27].y+"px"),o&256&&h(t,"width",i[27].r*2+"px"),o&256&&h(t,"height",i[27].r*2+"px"),o&8&&h(t,"background-color",i[3]),o&16&&h(t,"border","1px solid "+i[4]),o&256&&u!==(u=i[12](i[27].data.id)+"")&&O(s,u),i[27].data.data[i[1]]?f?f.p(i,o):(f=H(i),f.c(),f.m(a,null)):f&&(f.d(1),f=null),o&32&&h(a,"color",i[5]),o&192&&h(a,"text-shadow","-"+i[6]+"px -"+i[6]+"px 0 "+i[7]+", "+i[6]+"px -"+i[6]+"px 0 "+i[7]+", -"+i[6]+"px "+i[6]+"px 0 "+i[7]+", "+i[6]+"px "+i[6]+"px 0 "+i[7]),o&256&&h(a,"left",i[27].x+"px"),o&260&&h(a,"top",i[27].y-(i[2](i[27].r)?0:i[27].r+4)+"px"),o&256&&k!==(k=i[27].data.id)&&_(l,"data-id",k),o&260&&g!==(g=i[2](i[27].r))&&_(l,"data-visible",g)},d(i){i&&v(l),f&&f.d()}}}function re(e){let l,t,n=e[8],a=[];for(let d=0;d<n.length;d+=1)a[d]=J(G(e,n,d));return{c(){l=K("div");for(let d=0;d<a.length;d+=1)a[d].c();this.h()},l(d){l=p(d,"DIV",{class:!0,"data-has-parent-key":!0});var u=S(l);for(let s=0;s<a.length;s+=1)a[s].l(u);u.forEach(v),this.h()},h(){_(l,"class","circle-pack svelte-1d3oco8"),_(l,"data-has-parent-key",t=e[0]!==void 0)},m(d,u){q(d,l,u);for(let s=0;s<a.length;s+=1)a[s].m(l,null)},p(d,[u]){if(u&12798){n=d[8];let s;for(s=0;s<n.length;s+=1){const c=G(d,n,s);a[s]?a[s].p(c,u):(a[s]=J(c),a[s].c(),a[s].m(l,null))}for(;s<a.length;s+=1)a[s].d(1);a.length=n.length}u&1&&t!==(t=d[0]!==void 0)&&_(l,"data-has-parent-key",t)},i:A,o:A,d(d){d&&v(l),$(a,d)}}}function de(e,l,t){let n,a,d,u,s,c,C,k,g,f;const{width:i,height:o,data:b}=ee("LayerCake");j(e,i,r=>t(25,g=r)),j(e,o,r=>t(24,k=r)),j(e,b,r=>t(26,f=r));let{idKey:y="id"}=l,{parentKey:I=void 0}=l,{valueKey:D="value"}=l,{labelVisibilityThreshold:z=r=>r>25}=l,{fill:F="#fff"}=l,{stroke:L="#999"}=l,{textColor:R="#333"}=l,{textStroke:U=0}=l,{textStrokeColor:W="#000"}=l,{sortBy:E=(r,w)=>w.value-r.value}=l,{circlePadding:P=0}=l,V={};const Q=r=>r.replace(/^\w/,w=>w.toUpperCase()),X=te(",");return e.$$set=r=>{"idKey"in r&&t(14,y=r.idKey),"parentKey"in r&&t(0,I=r.parentKey),"valueKey"in r&&t(1,D=r.valueKey),"labelVisibilityThreshold"in r&&t(2,z=r.labelVisibilityThreshold),"fill"in r&&t(3,F=r.fill),"stroke"in r&&t(4,L=r.stroke),"textColor"in r&&t(5,R=r.textColor),"textStroke"in r&&t(6,U=r.textStroke),"textStrokeColor"in r&&t(7,W=r.textStrokeColor),"sortBy"in r&&t(15,E=r.sortBy),"circlePadding"in r&&t(16,P=r.circlePadding)},e.$$.update=()=>{e.$$.dirty&67108864&&t(22,n=f),e.$$.dirty&4341761&&I===void 0&&(t(17,V={[y]:"all"}),t(22,n=[...n,V])),e.$$.dirty&147457&&t(23,a=le().id(r=>r[y]).parentId(r=>r[y]===V[y]?"":r[I]||V[y])),e.$$.dirty&50397184&&t(20,d=ae().size([g,k]).padding(P)),e.$$.dirty&12582912&&t(21,u=a(n)),e.$$.dirty&2129922&&t(19,s=ie(u).sum((r,w)=>r.data[D]||1).sort(E)),e.$$.dirty&1572864&&t(18,c=d(s)),e.$$.dirty&262144&&t(8,C=c.descendants())},[I,D,z,F,L,R,U,W,C,i,o,b,Q,X,y,E,P,V,c,s,d,u,n,a,k,g,f]}class oe extends Y{constructor(l){super();Z(this,l,de,re,x,{idKey:14,parentKey:0,valueKey:1,labelVisibilityThreshold:2,fill:3,stroke:4,textColor:5,textStroke:6,textStrokeColor:7,sortBy:15,circlePadding:16})}}export{oe as default};
